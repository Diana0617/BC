{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-09-25T13:30:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_business_rules",
      "parentId": null,
      "modified": 1727266200000,
      "created": 1727266200000,
      "name": "Business Rules System - Testing",
      "description": "Pruebas del sistema completo de reglas de negocio",
      "scope": "collection",
      "_type": "workspace"
    },
    {
      "_id": "env_base",
      "parentId": "wrk_business_rules",
      "modified": 1727266210000,
      "created": 1727266210000,
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:3001",
        "owner_token": "TU_OWNER_TOKEN_AQUI",
        "business_token": "TU_BUSINESS_TOKEN_AQUI",
        "subdomain": "salon-bella-maria"
      },
      "dataPropertyOrder": {
        "&": ["base_url", "owner_token", "business_token", "subdomain"]
      },
      "color": null,
      "isPrivate": false,
      "metaSortKey": 1727266210000,
      "_type": "environment"
    },
    {
      "_id": "fld_auth",
      "parentId": "wrk_business_rules",
      "modified": 1727266300000,
      "created": 1727266300000,
      "name": "üîê Autenticaci√≥n",
      "description": "Endpoints para obtener tokens",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1727266300000,
      "_type": "request_group"
    },
    {
      "_id": "req_login_owner",
      "parentId": "fld_auth",
      "modified": 1727266400000,
      "created": 1727266400000,
      "url": "{{ _.base_url }}/api/auth/login",
      "name": "Login as OWNER",
      "description": "Login con credenciales de OWNER para obtener token",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"admin@beautycontrol.com\",\n  \"password\": \"AdminPassword123!\"\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266400000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_register_owner",
      "parentId": "fld_auth",
      "modified": 1727266410000,
      "created": 1727266410000,
      "url": "{{ _.base_url }}/api/auth/register",
      "name": "Register OWNER (if needed)",
      "description": "Registrar usuario OWNER si no existe",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"admin@beautycontrol.com\",\n  \"password\": \"AdminPassword123!\",\n  \"firstName\": \"Administrador\",\n  \"lastName\": \"Beauty Control\",\n  \"phone\": \"+57300000000\",\n  \"role\": \"OWNER\"\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266410000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "fld_owner_templates",
      "parentId": "wrk_business_rules",
      "modified": 1727266500000,
      "created": 1727266500000,
      "name": "üëë OWNER - Rule Templates",
      "description": "Gesti√≥n de plantillas de reglas por el OWNER",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1727266500000,
      "_type": "request_group"
    },
    {
      "_id": "req_create_rule_template",
      "parentId": "fld_owner_templates",
      "modified": 1727266600000,
      "created": 1727266600000,
      "url": "{{ _.base_url }}/api/rule-templates/owner/templates",
      "name": "‚ú® Create Appointment Closure Policy",
      "description": "Crear regla para controlar cierre de turnos sin comprobante",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"key\": \"APPOINTMENT_CLOSURE_POLICY\",\n  \"name\": \"Pol√≠tica de Cierre de Turnos\",\n  \"description\": \"Define si las especialistas pueden cerrar turnos sin subir comprobante de pago\",\n  \"type\": \"CONFIGURATION\",\n  \"defaultValue\": {\n    \"allow_closure_without_payment_proof\": false,\n    \"require_specialist_notes\": true,\n    \"require_supervisor_approval\": true,\n    \"max_amount_without_proof\": 50000,\n    \"notification_settings\": {\n      \"notify_admin\": true,\n      \"notify_business_owner\": true\n    }\n  },\n  \"category\": \"SERVICE_POLICY\",\n  \"allowCustomization\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{ _.owner_token }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266600000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_create_payment_policy",
      "parentId": "fld_owner_templates",
      "modified": 1727266605000,
      "created": 1727266605000,
      "url": "{{ _.base_url }}/api/rule-templates/owner/templates",
      "name": "‚ú® Create Payment Policy (Example)",
      "description": "Crear regla de pol√≠tica de pago como ejemplo",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"key\": \"PAYMENT_POLICY_STANDARD\",\n  \"name\": \"Pol√≠tica de Pago Est√°ndar\",\n  \"description\": \"Pol√≠tica de pago predeterminada para todos los negocios\",\n  \"type\": \"CONFIGURATION\",\n  \"defaultValue\": {\n    \"advance_payment_required\": true,\n    \"advance_percentage\": 50,\n    \"cancellation_hours\": 24,\n    \"refund_policy\": \"partial\"\n  },\n  \"category\": \"PAYMENT_POLICY\",\n  \"allowCustomization\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{ _.owner_token }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266605000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_list_owner_templates",
      "parentId": "fld_owner_templates",
      "modified": 1727266610000,
      "created": 1727266610000,
      "url": "{{ _.base_url }}/api/rule-templates/owner/templates",
      "name": "üìã List My Templates",
      "description": "Listar todas las plantillas creadas por el OWNER",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "PAYMENT_POLICY",
          "description": "Opcional: filtrar por categor√≠a",
          "disabled": true
        }
      ],
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.owner_token }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266610000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_update_rule_template",
      "parentId": "fld_owner_templates",
      "modified": 1727266620000,
      "created": 1727266620000,
      "url": "{{ _.base_url }}/api/rule-templates/owner/templates/TEMPLATE_ID_HERE",
      "name": "üîß Update Rule Template",
      "description": "Actualizar plantilla existente",
      "method": "PUT",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Pol√≠tica de Pago Premium\",\n  \"description\": \"Pol√≠tica de pago actualizada con nuevas condiciones\",\n  \"defaultValue\": {\n    \"advance_payment_required\": true,\n    \"advance_percentage\": 30,\n    \"cancellation_hours\": 48,\n    \"refund_policy\": \"full\"\n  },\n  \"allowCustomization\": true,\n  \"isActive\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{ _.owner_token }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266620000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "fld_business_rules",
      "parentId": "wrk_business_rules",
      "modified": 1727266700000,
      "created": 1727266700000,
      "name": "üè™ BUSINESS - Rules Management",
      "description": "Gesti√≥n de reglas por parte del negocio",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1727266700000,
      "_type": "request_group"
    },
    {
      "_id": "req_get_available_templates",
      "parentId": "fld_business_rules",
      "modified": 1727266800000,
      "created": 1727266800000,
      "url": "{{ _.base_url }}/api/rule-templates/business/templates/available",
      "name": "üì¶ Get Available Templates",
      "description": "Ver plantillas disponibles para el negocio",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "PAYMENT_POLICY",
          "description": "Opcional: filtrar por categor√≠a",
          "disabled": true
        }
      ],
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.business_token }}"
        },
        {
          "name": "X-Subdomain",
          "value": "{{ _.subdomain }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266800000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_setup_business_rules",
      "parentId": "fld_business_rules",
      "modified": 1727266810000,
      "created": 1727266810000,
      "url": "{{ _.base_url }}/api/business/rules/setup",
      "name": "üîß Setup Business Rules",
      "description": "Configurar reglas iniciales usando plantillas",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"templateKeys\": [\"APPOINTMENT_CLOSURE_POLICY\", \"PAYMENT_POLICY_STANDARD\"],\n  \"autoActivate\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{ _.business_token }}"
        },
        {
          "name": "X-Subdomain",
          "value": "{{ _.subdomain }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266810000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_get_business_rules",
      "parentId": "fld_business_rules",
      "modified": 1727266820000,
      "created": 1727266820000,
      "url": "{{ _.base_url }}/api/business/rules",
      "name": "üìã Get Business Rules",
      "description": "Ver todas las reglas del negocio",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "PAYMENT_POLICY",
          "description": "Opcional: filtrar por categor√≠a",
          "disabled": true
        },
        {
          "name": "activeOnly",
          "value": "true",
          "description": "Solo reglas activas",
          "disabled": true
        }
      ],
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.business_token }}"
        },
        {
          "name": "X-Subdomain",
          "value": "{{ _.subdomain }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266820000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_customize_business_rule",
      "parentId": "fld_business_rules",
      "modified": 1727266830000,
      "created": 1727266830000,
      "url": "{{ _.base_url }}/api/business/rules/APPOINTMENT_CLOSURE_POLICY",
      "name": "‚ú® Customize Appointment Closure Rule",
      "description": "Personalizar regla de cierre de turnos seg√∫n necesidades del negocio",
      "method": "PUT",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"customValue\": {\n    \"allow_closure_without_payment_proof\": true,\n    \"require_specialist_notes\": false,\n    \"require_supervisor_approval\": false,\n    \"max_amount_without_proof\": 100000,\n    \"notification_settings\": {\n      \"notify_admin\": false,\n      \"notify_business_owner\": true\n    },\n    \"custom_business_notes\": \"Confiamos en nuestras especialistas experimentadas\"\n  },\n  \"isActive\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{ _.business_token }}"
        },
        {
          "name": "X-Subdomain",
          "value": "{{ _.subdomain }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266830000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_get_effective_rules",
      "parentId": "fld_business_rules",
      "modified": 1727266840000,
      "created": 1727266840000,
      "url": "{{ _.base_url }}/api/rule-templates/business/templates/effective",
      "name": "üéØ Get Effective Rules",
      "description": "Ver los valores efectivos finales (template + customizaci√≥n)",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "PAYMENT_POLICY",
          "description": "Opcional: filtrar por categor√≠a",
          "disabled": true
        }
      ],
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.business_token }}"
        },
        {
          "name": "X-Subdomain",
          "value": "{{ _.subdomain }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1727266840000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "fld_public_templates",
      "parentId": "wrk_business_rules",
      "modified": 1727266900000,
      "created": 1727266900000,
      "name": "üåç PUBLIC - Templates",
      "description": "Endpoints p√∫blicos (sin autenticaci√≥n)",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1727266900000,
      "_type": "request_group"
    },
    {
      "_id": "req_get_public_templates",
      "parentId": "fld_public_templates",
      "modified": 1727267000000,
      "created": 1727267000000,
      "url": "{{ _.base_url }}/api/rule-templates",
      "name": "üìñ Get Public Templates",
      "description": "Ver plantillas p√∫blicas disponibles",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "PAYMENT_POLICY",
          "description": "Opcional: filtrar por categor√≠a",
          "disabled": true
        }
      ],
      "headers": [],
      "authentication": {},
      "metaSortKey": -1727267000000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    },
    {
      "_id": "req_get_template_by_id",
      "parentId": "fld_public_templates",
      "modified": 1727267010000,
      "created": 1727267010000,
      "url": "{{ _.base_url }}/api/rule-templates/TEMPLATE_ID_HERE",
      "name": "üîç Get Template by ID",
      "description": "Ver detalles de una plantilla espec√≠fica",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [],
      "authentication": {},
      "metaSortKey": -1727267010000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "_type": "request"
    }
  ]
}