{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-10-14T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "req_group_commissions",
      "_type": "request_group",
      "parentId": "wrk_beauty_control",
      "modified": 1697241600000,
      "created": 1697241600000,
      "name": "📊 Comisiones (FM-26)",
      "description": "Endpoints para gestión de comisiones a nivel de negocio y servicios",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1697241600000
    },
    {
      "_id": "req_group_consents",
      "_type": "request_group",
      "parentId": "wrk_beauty_control",
      "modified": 1697241600000,
      "created": 1697241600000,
      "name": "📝 Consentimientos (FM-26)",
      "description": "Endpoints para gestión de plantillas y firmas de consentimiento",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1697241500000
    },
    {
      "_id": "wrk_beauty_control",
      "_type": "workspace",
      "parentId": null,
      "modified": 1697241600000,
      "created": 1697241600000,
      "name": "Beauty Control - FM-26",
      "description": "API endpoints para comisiones y consentimientos",
      "scope": "collection"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "parentId": "wrk_beauty_control",
      "modified": 1697241600000,
      "created": 1697241600000,
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:5000/api",
        "business_id": "TU_BUSINESS_ID_AQUI",
        "service_id": "TU_SERVICE_ID_AQUI",
        "customer_id": "TU_CUSTOMER_ID_AQUI",
        "template_id": "TU_TEMPLATE_ID_AQUI",
        "signature_id": "TU_SIGNATURE_ID_AQUI"
      },
      "dataPropertyOrder": {
        "&": [
          "base_url",
          "business_id",
          "service_id",
          "customer_id",
          "template_id",
          "signature_id"
        ]
      },
      "color": null,
      "isPrivate": false,
      "metaSortKey": 1697241600000
    },
    {
      "_id": "req_get_business_commission_config",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/commission-config",
      "name": "1. Obtener Configuración de Comisiones del Negocio",
      "description": "Obtiene o crea la configuración de comisiones del negocio",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241600000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_update_business_commission_config",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/commission-config",
      "name": "2. Actualizar Configuración de Comisiones",
      "description": "Actualiza la configuración de comisiones del negocio",
      "method": "PUT",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"commissionsEnabled\": true,\n  \"calculationType\": \"MIXTO\",\n  \"generalPercentage\": 60,\n  \"notes\": \"Configuración mixta: algunos servicios con comisión general, otros personalizados\"\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241590000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_service_commission",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/services/{{ _.service_id }}/commission",
      "name": "3. Obtener Comisión de un Servicio",
      "description": "Obtiene la comisión efectiva de un servicio (específica o general)",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241580000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_upsert_service_commission",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/services/{{ _.service_id }}/commission",
      "name": "4. Crear/Actualizar Comisión de Servicio",
      "description": "Crea o actualiza la comisión específica de un servicio",
      "method": "PUT",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"type\": \"PERCENTAGE\",\n  \"specialistPercentage\": 70,\n  \"notes\": \"Comisión especial para servicios premium\"\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241570000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_delete_service_commission",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/services/{{ _.service_id }}/commission",
      "name": "5. Eliminar Comisión Específica de Servicio",
      "description": "Elimina la comisión específica (volverá a usar la general)",
      "method": "DELETE",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241560000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_calculate_commission",
      "_type": "request",
      "parentId": "req_group_commissions",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/services/{{ _.service_id }}/commission/calculate",
      "name": "6. Calcular Comisión para un Monto",
      "description": "Calcula cuánto recibe el especialista y el negocio",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"amount\": 100000\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241550000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_consent_templates",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-templates",
      "name": "1. Listar Plantillas de Consentimiento",
      "description": "Obtiene todas las plantillas del negocio (con filtros opcionales)",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "category",
          "value": "ESTETICO",
          "disabled": true
        },
        {
          "name": "activeOnly",
          "value": "true",
          "disabled": true
        },
        {
          "name": "search",
          "value": "botox",
          "disabled": true
        }
      ],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241500000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_consent_template",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-templates/{{ _.template_id }}",
      "name": "2. Obtener Plantilla Específica",
      "description": "Obtiene los detalles de una plantilla",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241490000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_create_consent_template",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-templates",
      "name": "3. Crear Plantilla de Consentimiento",
      "description": "Crea una nueva plantilla de consentimiento",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Consentimiento Informado - Aplicación de Botox\",\n  \"code\": \"CONSENT_BOTOX_V1\",\n  \"content\": \"<div style='font-family: Arial, sans-serif; padding: 20px;'>\\n  <h1 style='text-align: center;'>{{negocio_nombre}}</h1>\\n  <p style='text-align: center;'>{{negocio_direccion}} - {{negocio_telefono}}</p>\\n  <hr/>\\n  \\n  <h2>CONSENTIMIENTO INFORMADO - APLICACIÓN DE TOXINA BOTULÍNICA</h2>\\n  \\n  <p>Yo, <strong>{{cliente_nombre}}</strong>, identificado(a) con documento <strong>{{cliente_documento}}</strong>, nacido(a) el <strong>{{cliente_fecha_nacimiento}}</strong>, manifiesto que:</p>\\n  \\n  <ol>\\n    <li>He sido informado(a) sobre el procedimiento de <strong>{{servicio_nombre}}</strong> que se me realizará.</li>\\n    <li>Comprendo los beneficios, riesgos y posibles complicaciones del tratamiento.</li>\\n    <li>He tenido la oportunidad de hacer preguntas y todas han sido respondidas satisfactoriamente.</li>\\n    <li>Autorizo al profesional para realizar el procedimiento.</li>\\n  </ol>\\n  \\n  <h3>Información de Salud del Paciente</h3>\\n  <p><strong>Alergias:</strong> [CAMPO_EDITABLE: alergias]</p>\\n  <p><strong>Medicamentos Actuales:</strong> [CAMPO_EDITABLE: medicamentos]</p>\\n  <p><strong>Condiciones Médicas:</strong> [CAMPO_EDITABLE: condiciones_medicas]</p>\\n  \\n  <div style='margin-top: 50px;'>\\n    <p>Firmado digitalmente el <strong>{{fecha_firma}}</strong></p>\\n    <p>Firma: [FIRMA_DIGITAL]</p>\\n  </div>\\n</div>\",\n  \"version\": \"1.0.0\",\n  \"editableFields\": [\n    {\n      \"name\": \"alergias\",\n      \"label\": \"¿Tiene alguna alergia? (Especifique)\",\n      \"type\": \"textarea\",\n      \"required\": true,\n      \"placeholder\": \"Ej: Penicilina, Polen, etc. o escriba 'Ninguna'\"\n    },\n    {\n      \"name\": \"medicamentos\",\n      \"label\": \"Medicamentos que está tomando actualmente\",\n      \"type\": \"textarea\",\n      \"required\": false,\n      \"placeholder\": \"Ej: Ibuprofeno 400mg cada 8 horas\"\n    },\n    {\n      \"name\": \"condiciones_medicas\",\n      \"label\": \"Condiciones médicas preexistentes\",\n      \"type\": \"textarea\",\n      \"required\": false,\n      \"placeholder\": \"Ej: Hipertensión, Diabetes, etc.\"\n    }\n  ],\n  \"pdfConfig\": {\n    \"orientation\": \"portrait\",\n    \"pageSize\": \"letter\",\n    \"margins\": {\n      \"top\": 50,\n      \"bottom\": 50,\n      \"left\": 50,\n      \"right\": 50\n    },\n    \"includeBusinessLogo\": true,\n    \"fontSize\": 12,\n    \"fontFamily\": \"Arial\"\n  },\n  \"category\": \"ESTETICO\",\n  \"metadata\": {\n    \"procedureType\": \"BOTOX\",\n    \"riskLevel\": \"MEDIO\",\n    \"requiresWitness\": false\n  }\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241480000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_update_consent_template",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-templates/{{ _.template_id }}",
      "name": "4. Actualizar Plantilla de Consentimiento",
      "description": "Actualiza una plantilla existente (incrementa versión si cambia el contenido)",
      "method": "PUT",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Consentimiento Informado - Aplicación de Botox (Actualizado)\",\n  \"content\": \"<div>CONTENIDO ACTUALIZADO...</div>\",\n  \"isActive\": true\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241470000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_delete_consent_template",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-templates/{{ _.template_id }}",
      "name": "5. Eliminar Plantilla (Soft Delete)",
      "description": "Desactiva una plantilla (soft delete)",
      "method": "DELETE",
      "body": {},
      "parameters": [
        {
          "name": "hardDelete",
          "value": "false",
          "disabled": true,
          "description": "true para eliminar permanentemente (solo si no tiene firmas)"
        }
      ],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241460000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_sign_consent",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-signatures",
      "name": "6. Firmar Consentimiento",
      "description": "Crea una firma de consentimiento con trazabilidad legal",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"consentTemplateId\": \"{{ _.template_id }}\",\n  \"customerId\": \"{{ _.customer_id }}\",\n  \"appointmentId\": null,\n  \"serviceId\": \"{{ _.service_id }}\",\n  \"editableFieldsData\": {\n    \"alergias\": \"Penicilina y derivados\",\n    \"medicamentos\": \"Ibuprofeno 400mg cada 8 horas\\nLosartán 50mg 1 vez al día\",\n    \"condiciones_medicas\": \"Hipertensión controlada\"\n  },\n  \"signatureData\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==\",\n  \"signatureType\": \"DIGITAL\",\n  \"signedBy\": \"María Fernanda Gómez\",\n  \"ipAddress\": \"192.168.1.100\",\n  \"userAgent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n  \"location\": {\n    \"lat\": 4.6097,\n    \"lng\": -74.0817,\n    \"accuracy\": 10\n  },\n  \"device\": {\n    \"type\": \"mobile\",\n    \"os\": \"Android\",\n    \"browser\": \"Chrome\"\n  }\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241450000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_customer_signatures",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-signatures/customer/{{ _.customer_id }}",
      "name": "7. Obtener Firmas de un Cliente",
      "description": "Lista todas las firmas de un cliente específico",
      "method": "GET",
      "body": {},
      "parameters": [
        {
          "name": "status",
          "value": "ACTIVE",
          "disabled": true,
          "description": "ACTIVE | REVOKED | EXPIRED"
        }
      ],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241440000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_signature",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-signatures/{{ _.signature_id }}",
      "name": "8. Obtener Firma Específica",
      "description": "Obtiene los detalles completos de una firma con todas las relaciones",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241430000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_revoke_signature",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-signatures/{{ _.signature_id }}/revoke",
      "name": "9. Revocar Firma",
      "description": "Revoca una firma de consentimiento",
      "method": "POST",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"reason\": \"El cliente solicitó la revocación del consentimiento\",\n  \"revokedBy\": \"Usuario Admin\"\n}"
      },
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241420000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    },
    {
      "_id": "req_get_signature_pdf",
      "_type": "request",
      "parentId": "req_group_consents",
      "modified": 1697241600000,
      "created": 1697241600000,
      "url": "{{ _.base_url }}/business/{{ _.business_id }}/consent-signatures/{{ _.signature_id }}/pdf",
      "name": "10. Generar/Obtener PDF de Firma",
      "description": "Genera o descarga el PDF de una firma (PENDIENTE IMPLEMENTACIÓN)",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "authentication": {},
      "metaSortKey": -1697241410000,
      "isPrivate": false,
      "settingStoreCookies": true,
      "settingSendCookies": true,
      "settingDisableRenderRequestBody": false,
      "settingEncodeUrl": true,
      "settingRebuildPath": true,
      "settingFollowRedirects": "global"
    }
  ]
}
