{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-11-05T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_whatsapp_admin",
      "_type": "workspace",
      "name": "WhatsApp Admin API - Complete",
      "description": "22 endpoints para gestión completa de WhatsApp Business Platform"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:5000",
        "business_id": "1",
        "auth_token": "YOUR_JWT_TOKEN_HERE"
      }
    },
    {
      "_id": "folder_token",
      "_type": "request_group",
      "name": "1. Token Management",
      "description": "7 endpoints para gestión de tokens"
    },
    {
      "_id": "req_get_token_info",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.1 Get Token Info",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_store_token",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.2 Store Token (Manual)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"accessToken\": \"EAAtest-token-from-meta-12345\",\n  \"phoneNumberId\": \"123456789012345\",\n  \"wabaId\": \"098765432109876\"\n}"
      }
    },
    {
      "_id": "req_rotate_token",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.3 Rotate Token",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token/rotate",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"newAccessToken\": \"EAAnew-rotated-token-12345\"\n}"
      }
    },
    {
      "_id": "req_delete_token",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.4 Delete Token",
      "method": "DELETE",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_test_connection",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.5 Test Connection",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token/test",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_token_history",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.6 Get Token History",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token/history?page=1&limit=10",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_token_audit",
      "_type": "request",
      "parentId": "folder_token",
      "name": "1.7 Get Token Audit",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/token/audit?page=1&limit=20",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "folder_signup",
      "_type": "request_group",
      "name": "2. Embedded Signup (OAuth)",
      "description": "2 endpoints para OAuth con Meta"
    },
    {
      "_id": "req_signup_config",
      "_type": "request",
      "parentId": "folder_signup",
      "name": "2.1 Get Embedded Signup Config",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/embedded-signup/config",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_signup_callback",
      "_type": "request",
      "parentId": "folder_signup",
      "name": "2.2 Handle Embedded Signup Callback",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/embedded-signup/callback",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"code\": \"auth-code-from-meta\",\n  \"state\": \"whatsapp_signup_1_1234567890\"\n}"
      }
    },
    {
      "_id": "folder_templates",
      "_type": "request_group",
      "name": "3. Template Management",
      "description": "6 endpoints para gestión de plantillas"
    },
    {
      "_id": "req_list_templates",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.1 List Templates",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates?page=1&limit=10&status=APPROVED",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_create_template",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.2 Create Template (Draft)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"appointment_reminder\",\n  \"language\": \"es\",\n  \"category\": \"UTILITY\",\n  \"components\": [\n    {\n      \"type\": \"HEADER\",\n      \"format\": \"TEXT\",\n      \"text\": \"Recordatorio de Cita\"\n    },\n    {\n      \"type\": \"BODY\",\n      \"text\": \"Hola {{1}}, tienes una cita el {{2}} a las {{3}}. ¿Confirmas tu asistencia?\"\n    },\n    {\n      \"type\": \"FOOTER\",\n      \"text\": \"Beauty Control\"\n    },\n    {\n      \"type\": \"BUTTONS\",\n      \"buttons\": [\n        { \"type\": \"QUICK_REPLY\", \"text\": \"Confirmar\" },\n        { \"type\": \"QUICK_REPLY\", \"text\": \"Cancelar\" }\n      ]\n    }\n  ]\n}"
      }
    },
    {
      "_id": "req_update_template",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.3 Update Template",
      "method": "PUT",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates/TEMPLATE_ID",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"appointment_reminder_v2\",\n  \"components\": [\n    {\n      \"type\": \"BODY\",\n      \"text\": \"Updated message...\"\n    }\n  ]\n}"
      }
    },
    {
      "_id": "req_submit_template",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.4 Submit Template to Meta",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates/TEMPLATE_ID/submit",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_delete_template",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.5 Delete Template",
      "method": "DELETE",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates/TEMPLATE_ID",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_sync_templates",
      "_type": "request",
      "parentId": "folder_templates",
      "name": "3.6 Sync Templates with Meta",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/templates/sync",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "folder_messages",
      "_type": "request_group",
      "name": "4. Message History",
      "description": "2 endpoints para historial de mensajes"
    },
    {
      "_id": "req_list_messages",
      "_type": "request",
      "parentId": "folder_messages",
      "name": "4.1 List Messages",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/messages?status=SENT&startDate=2025-01-01&endDate=2025-12-31&page=1&limit=20",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_get_message",
      "_type": "request",
      "parentId": "folder_messages",
      "name": "4.2 Get Message Detail",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/messages/MESSAGE_UUID",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "folder_webhooks",
      "_type": "request_group",
      "name": "5. Webhook Events",
      "description": "3 endpoints para eventos de webhook"
    },
    {
      "_id": "req_list_webhook_events",
      "_type": "request",
      "parentId": "folder_webhooks",
      "name": "5.1 List Webhook Events",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/webhooks/events?eventType=message_status&page=1&limit=20",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_get_webhook_event",
      "_type": "request",
      "parentId": "folder_webhooks",
      "name": "5.2 Get Webhook Event Detail",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/webhooks/events/EVENT_UUID",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_replay_webhook",
      "_type": "request",
      "parentId": "folder_webhooks",
      "name": "5.3 Replay Webhook Event",
      "method": "POST",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/webhooks/events/EVENT_UUID/replay",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "folder_health",
      "_type": "request_group",
      "name": "6. Health & Stats",
      "description": "2 endpoints para salud y estadísticas"
    },
    {
      "_id": "req_health",
      "_type": "request",
      "parentId": "folder_health",
      "name": "6.1 Health Check",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/health",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    },
    {
      "_id": "req_stats",
      "_type": "request",
      "parentId": "folder_health",
      "name": "6.2 Get Statistics",
      "method": "GET",
      "url": "{{ _.base_url }}/api/business/{{ _.business_id }}/admin/whatsapp/stats",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ]
    }
  ]
}
