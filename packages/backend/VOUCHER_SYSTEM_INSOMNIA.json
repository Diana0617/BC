{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-01-13T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_vouchers",
      "_type": "workspace",
      "name": "Beauty Control - Vouchers System",
      "description": "Sistema completo de vouchers y penalizaciones",
      "scope": "collection"
    },
    {
      "_id": "env_vouchers",
      "_type": "environment",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:3000",
        "token": "",
        "business_id": "",
        "customer_id": "",
        "voucher_code": "",
        "voucher_id": "",
        "block_id": "",
        "appointment_id": ""
      },
      "parentId": "wrk_vouchers"
    },
    {
      "_id": "folder_client",
      "_type": "request_group",
      "name": "üì± Cliente - Vouchers",
      "description": "Endpoints para clientes finales",
      "parentId": "wrk_vouchers"
    },
    {
      "_id": "req_my_vouchers",
      "_type": "request",
      "name": "Mis Vouchers Activos",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/my-vouchers",
      "description": "Obtener todos los vouchers activos del cliente autenticado",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parentId": "folder_client"
    },
    {
      "_id": "req_validate_voucher",
      "_type": "request",
      "name": "Validar C√≥digo de Voucher",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/validate/{{ _.voucher_code }}",
      "description": "Verificar si un c√≥digo de voucher es v√°lido antes de aplicarlo",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parentId": "folder_client"
    },
    {
      "_id": "req_apply_voucher",
      "_type": "request",
      "name": "Aplicar Voucher a Cita",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/apply",
      "description": "Aplicar un voucher a una cita nueva",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"voucherCode\": \"VCH-ABC-123-XYZ\",\n  \"bookingId\": \"{{ _.appointment_id }}\"\n}"
      },
      "parentId": "folder_client"
    },
    {
      "_id": "req_check_block",
      "_type": "request",
      "name": "Verificar Estado de Bloqueo",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/check-block-status",
      "description": "Verificar si el cliente est√° bloqueado para agendar citas",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parentId": "folder_client"
    },
    {
      "_id": "req_cancellation_history",
      "_type": "request",
      "name": "Historial de Cancelaciones",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/cancellation-history?days=30",
      "description": "Ver historial de cancelaciones del cliente",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parameters": [
        {
          "name": "days",
          "value": "30",
          "description": "N√∫mero de d√≠as hacia atr√°s"
        }
      ],
      "parentId": "folder_client"
    },
    {
      "_id": "folder_business",
      "_type": "request_group",
      "name": "üè¢ Negocio - Gesti√≥n de Vouchers",
      "description": "Endpoints para administraci√≥n del negocio",
      "parentId": "wrk_vouchers"
    },
    {
      "_id": "req_list_vouchers",
      "_type": "request",
      "name": "Listar Todos los Vouchers",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/business/list?page=1&limit=20",
      "description": "Listar todos los vouchers del negocio con paginaci√≥n",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parameters": [
        {
          "name": "page",
          "value": "1",
          "description": "P√°gina"
        },
        {
          "name": "limit",
          "value": "20",
          "description": "L√≠mite por p√°gina"
        },
        {
          "name": "status",
          "value": "",
          "description": "Filtrar por estado: ACTIVE, USED, EXPIRED, CANCELLED",
          "disabled": true
        },
        {
          "name": "customerId",
          "value": "",
          "description": "Filtrar por cliente",
          "disabled": true
        }
      ],
      "parentId": "folder_business"
    },
    {
      "_id": "req_cancel_voucher",
      "_type": "request",
      "name": "Cancelar Voucher",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/business/cancel/{{ _.voucher_id }}",
      "description": "Cancelar un voucher manualmente (ej: por fraude)",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"reason\": \"Voucher cancelado por uso indebido\"\n}"
      },
      "parentId": "folder_business"
    },
    {
      "_id": "req_create_manual_voucher",
      "_type": "request",
      "name": "Crear Voucher Manual",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/business/create-manual",
      "description": "Crear un voucher manualmente como cortes√≠a o compensaci√≥n",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"customerId\": \"{{ _.customer_id }}\",\n  \"amount\": 50000,\n  \"validityDays\": 30,\n  \"reason\": \"Compensaci√≥n por inconveniente en el servicio\"\n}"
      },
      "parentId": "folder_business"
    },
    {
      "_id": "req_list_blocks",
      "_type": "request",
      "name": "Listar Clientes Bloqueados",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/business/blocks?status=ACTIVE",
      "description": "Ver todos los clientes con bloqueo activo",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parameters": [
        {
          "name": "status",
          "value": "ACTIVE",
          "description": "Estado: ACTIVE, LIFTED, EXPIRED"
        }
      ],
      "parentId": "folder_business"
    },
    {
      "_id": "req_lift_block",
      "_type": "request",
      "name": "Levantar Bloqueo",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/business/lift-block/{{ _.block_id }}",
      "description": "Levantar bloqueo de un cliente manualmente",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        },
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"notes\": \"Cliente habl√≥ con gerencia y se acord√≥ levantar el bloqueo\"\n}"
      },
      "parentId": "folder_business"
    },
    {
      "_id": "req_customer_stats",
      "_type": "request",
      "name": "Estad√≠sticas de Cliente",
      "method": "GET",
      "url": "{{ _.base_url }}/api/vouchers/business/customer-stats/{{ _.customer_id }}?days=30",
      "description": "Ver estad√≠sticas de cancelaciones de un cliente espec√≠fico",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parameters": [
        {
          "name": "days",
          "value": "30",
          "description": "Per√≠odo en d√≠as"
        }
      ],
      "parentId": "folder_business"
    },
    {
      "_id": "folder_admin",
      "_type": "request_group",
      "name": "‚öôÔ∏è Admin - Mantenimiento",
      "description": "Endpoints administrativos y CRON",
      "parentId": "wrk_vouchers"
    },
    {
      "_id": "req_cleanup",
      "_type": "request",
      "name": "Limpiar Expirados (CRON)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/cleanup",
      "description": "Marcar vouchers y bloqueos expirados (ejecutar diariamente)",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.token }}"
        }
      ],
      "parentId": "folder_admin"
    },
    {
      "_id": "folder_testing",
      "_type": "request_group",
      "name": "üß™ Testing - Flujo Completo",
      "description": "Ejemplos de flujos completos para testing",
      "parentId": "wrk_vouchers"
    },
    {
      "_id": "req_test_scenario_1",
      "_type": "request",
      "name": "Escenario 1: Cancelaci√≥n con Voucher",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/test/scenario-cancel-with-voucher",
      "description": "SIMULACI√ìN: Cliente cancela con 48h de anticipaci√≥n ‚Üí genera voucher",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"businessId\": \"{{ _.business_id }}\",\n  \"customerId\": \"{{ _.customer_id }}\",\n  \"bookingId\": \"{{ _.appointment_id }}\",\n  \"bookingDateTime\": \"2025-01-15T10:00:00Z\",\n  \"bookingAmount\": 50000,\n  \"cancelReason\": \"Tengo un compromiso familiar\",\n  \"hoursBeforeCancellation\": 48\n}"
      },
      "parentId": "folder_testing"
    },
    {
      "_id": "req_test_scenario_2",
      "_type": "request",
      "name": "Escenario 2: Cancelaci√≥n sin Voucher",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/test/scenario-cancel-no-voucher",
      "description": "SIMULACI√ìN: Cliente cancela con 2h de anticipaci√≥n ‚Üí NO genera voucher",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"businessId\": \"{{ _.business_id }}\",\n  \"customerId\": \"{{ _.customer_id }}\",\n  \"bookingId\": \"{{ _.appointment_id }}\",\n  \"bookingDateTime\": \"2025-01-15T10:00:00Z\",\n  \"bookingAmount\": 50000,\n  \"cancelReason\": \"No puedo asistir\",\n  \"hoursBeforeCancellation\": 2\n}"
      },
      "parentId": "folder_testing"
    },
    {
      "_id": "req_test_scenario_3",
      "_type": "request",
      "name": "Escenario 3: Bloqueo por Cancelaciones",
      "method": "POST",
      "url": "{{ _.base_url }}/api/vouchers/test/scenario-block-customer",
      "description": "SIMULACI√ìN: Cliente con 3+ cancelaciones ‚Üí se bloquea",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"businessId\": \"{{ _.business_id }}\",\n  \"customerId\": \"{{ _.customer_id }}\",\n  \"cancelCount\": 3\n}"
      },
      "parentId": "folder_testing"
    }
  ]
}
